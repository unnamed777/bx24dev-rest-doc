<html>
        <head>
            <title>crm.livefeedmessage.add</title>
            <link href="style.css" type="text/css" rel="stylesheet"/>
        </head>
        <body>
        <h1 class="title">crm.livefeedmessage.add <a class="original-doc-link" href="https://dev.1c-bitrix.ru/rest_help/crm/stream/livefeedmessage_add.php" target="_blank">↗︎</a></h1>
        <div class="content">
            
								<p class="note">С версии CRM 23.1400.0 метод объявлен устаревшим.</p>

<p id="tab-panel-title"></p> 

<div class="tab">

<h3 class="tab-title">Описание</h3>
<pre class="syntax">crm.livefeedmessage.add(fields)</pre>

<p>Добавляет сообщение в ленту CRM.</p>



</div>

<!------->
<div class="tab">

<h3 class="tab-title">Параметры</h3>

<table class="tnormal" width="100%">
	<tbody>
		<tr>
			<th width="15%">Параметр</th>
			<th>Описание</th>
		</tr>

<tr>
<td>POST_TITLE</td>
<td>Заголовок сообщения.</td>
</tr>

<tr>
<td>MESSAGE</td>
<td>Текст сообщения.</td>
</tr>

<tr>
<td>SPERM</td>
<td>Права на просмотр сообщения, пример:
<pre class="syntax">SPERM": {
	"CRMCONTACT": ["CRMCONTACT3", "CRMCONTACT7"], // контакты CRM
	"CRMCOMPANY": ["CRMCOMPANY1", "CRMCOMPANY3"], // компании CRM
	"CRMDEAL": ["CRMDEAL3", "CRMDEAL5"], // сделки CRM
	"CRMLEAD": ["CRMLEAD9", "CRMLEAD11"], // лиды CRM
	"SG": ["SG5", "SG9"], // рабочие группы соцсети
	"U": ["U1", "U3"], // пользователи
	"DR": ["DR1", "DR7"], // подразделения с подотделами
}
</pre>
</td>
</tr>

<tr>
<td>ENTITYTYPEID</td>
<td>Тип сущности (число), в которой опубликовано сообщение:
<ul>
<li>1 - лид;</li>
<li>2 - сделка;</li>
<li>3 - контакт;</li>
<li>4 - компания.</li>
</ul>
</td>
</tr>

<tr>
<td>ENTITYID</td>
<td>ID конкретного лида/сделки/контакта/компании, в которой опубликовано сообщение.</td>
</tr>

<tr>
<td>FILES</td>
<td>Файлы сообщения.</td>
</tr>


	</tbody>
</table>

<a class="link" name="example"></a>
</div>

<!------->
<div class="tab">

<h3 class="tab-title">Примеры</h3>
<pre class="syntax" rel="example">BX24.callMethod(
	"crm.livefeedmessage.add",
	{
		fields:
		{
			"POST_TITLE": "Немного о сервисе",
			"MESSAGE": "Битрикс24 создан на базе платформы Bitrix Framework.",
			"SPERM": {
				"CRMCONTACT": ["CRMCONTACT3", "CRMCONTACT7"],
				"CRMCOMPANY": ["CRMCOMPANY1", "CRMCOMPANY3"],
				"CRMDEAL": ["CRMDEAL3", "CRMDEAL5"],
				"CRMLEAD": ["CRMLEAD9", "CRMLEAD11"],
				"SG": ["SG5", "SG9"],
				"U": ["U1", "U3"],
				"DR": ["DR1", "DR7"],
			},
			"ENTITYTYPEID": 3,
			"ENTITYID": 3,
		}
	},
	function(result) 
	{
		if(result.error())
			console.error(result.error());
		else
			console.info("Создано сообщение с ID " + result.data());
	}
);
</pre>

<br><br>

<pre class="syntax" rel="example">BX24.callMethod(
	"crm.livefeedmessage.add",
	{
		fields:
		{
			"POST_TITLE": "POST_TITLE",
			"MESSAGE": "MESSAGE",
			"SPERM": {
				"CRMLEAD": ["CRMLEAD9", "CRMLEAD11"],
				"U": ["U1"],
			},
			"ENTITYTYPEID": 1,
			"ENTITYID": 56374,
			"FILES": [
				["1.gif", "R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="],
				["2.gif", "..."]
			],
		}
	},
	function(result)
	{
		if(result.error())
			console.error(result.error());
		else
			console.info("Создано сообщение с ID " + result.data());
	}
); </pre>

</div>

<!------->

<h4>Дополнительно</h4>

<ul>
<li><a class="link" href="/rest_help/crm/timeline/comment/crm_timeline_comment_add.php">crm.timeline.comment.add</a></li>
 </ul>

<br><br>							
        </div>
        </body>
        </html>